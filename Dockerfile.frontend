# Frontend build image: build runs at container start so VITE_* env from compose are used
FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
# Use npm install when package-lock.json is not present in build context
RUN npm install

COPY . .

# Build runs via docker-compose command so VITE_API_BASE_URL etc. come from env
# Output is written to mounted volume /app/dist (frontend_dist)
VOLUME ["/app/dist"]

CMD ["npm", "run", "build"]